<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>mostlymaths.net  | Modifying the agnoster theme for zsh</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.57.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    
      <link rel="stylesheet" href="/css/all.css">
    
      <link rel="stylesheet" href="/byrne-caps/stylesheet.css">
    
      <link rel="stylesheet" href="/css/custom.css">
    
      <link rel="stylesheet" href="/webfonts/monoid.css">
    

    
      
    

    

    <meta property="og:title" content="Modifying the agnoster theme for zsh" />
<meta property="og:description" content="Even though I have been a long time user of oh-my-zsh on zsh (moved from plain bash to zsh like 10 years ago), I have been minimal on my use of its theme capabilities. I have used the default theme forever: robbyrussell. But recently I was showing my friend @craftycoder the tweaks I have on my system (fzf, autojump, etc) and he showed me this theme, agnoster." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mostlymaths.net/2018/04/modifying-agnoster-theme-for-zsh.html/" />
<meta property="article:published_time" content="2018-04-29T15:38:00+02:00" />
<meta property="article:modified_time" content="2018-04-29T15:38:00+02:00" />
<meta itemprop="name" content="Modifying the agnoster theme for zsh">
<meta itemprop="description" content="Even though I have been a long time user of oh-my-zsh on zsh (moved from plain bash to zsh like 10 years ago), I have been minimal on my use of its theme capabilities. I have used the default theme forever: robbyrussell. But recently I was showing my friend @craftycoder the tweaks I have on my system (fzf, autojump, etc) and he showed me this theme, agnoster.">


<meta itemprop="datePublished" content="2018-04-29T15:38:00&#43;02:00" />
<meta itemprop="dateModified" content="2018-04-29T15:38:00&#43;02:00" />
<meta itemprop="wordCount" content="464">



<meta itemprop="keywords" content=" Mac," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Modifying the agnoster theme for zsh"/>
<meta name="twitter:description" content="Even though I have been a long time user of oh-my-zsh on zsh (moved from plain bash to zsh like 10 years ago), I have been minimal on my use of its theme capabilities. I have used the default theme forever: robbyrussell. But recently I was showing my friend @craftycoder the tweaks I have on my system (fzf, autojump, etc) and he showed me this theme, agnoster."/>

  </head>

  <body class="ma0 helvetica bg-near-white">

    





<header class="cover bg-top" style="max-height: 250px;background-image: url('https://mostlymaths.net/screenshot.jpg');">
    <div class="pb1-m pb1-l bg-black-60">
      <nav class="pv1 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://mostlymaths.net/" class="f3 fw2 hover-white no-underline white-90 dib">
      mostlymaths.net
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
              <a class="hover-white no-underline white-90" href="/search/" title="   page">
                  <i class='fas fa-search'> </i>
            </a>
          </li>
          
        </ul>
      
      











    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        
          
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      

  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <h1 class="fw1 mb1 f1">Modifying the agnoster theme for zsh</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2018-04-29T15:38:00&#43;02:00">April 29, 2018</time>
      
      
      &nbsp;&nbsp;&nbsp;
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> 3 minutes read</span>
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> | 464 words</span>
      
    </header>
    
    

    <section class="nested-copy-line-height lh-copy f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l justify dropcap"><p>Even though I have been a long time user of <a href="http://ohmyz.sh/">oh-my-zsh</a> on zsh (moved from <a href="https://amzn.to/2KqeJR4">plain bash to zsh</a> like 10 years ago), I have been minimal on my use of its theme capabilities. I have used the default theme forever: <code>robbyrussell</code>. But recently I was showing my friend @<a href="http://crafty-coder.com/">craftycoder</a> the tweaks I have on my system (<a href="https://github.com/junegunn/fzf">fzf</a>, <a href="https://github.com/wting/autojump">autojump</a>, etc) and he showed me this theme, <a href="https://github.com/agnoster/agnoster-zsh-theme">agnoster</a>.</p>

<p>It had several pieces I liked:</p>

<ul>
<li>Powerline-style prompt</li>
<li>Git status</li>
<li>Virtualenv detection</li>
</ul>

<p>I wasn’t sold on some of the default decisions, so I decided to completely tweak and remove stuff I didn’t need. You can have a look <a href="https://github.com/rberenguel/rb-zsh-theme">here</a>.</p>

<h2 id="what-did-i-want-to-modify">What did I want to modify?</h2>

<ul>
<li>Too long branch names. Looks very nice with <code>master</code> but is a bit more troublesome with <code>feature/SAS-4028/kubernetes/poc</code></li>
<li>I don’t care that much about the path. Current directory is enough</li>
<li>Usually I like knowing in which <code>git</code> project I am in better</li>
</ul>

<figure class="fig-wide">
    <img src="screenshot.jpg"/> 
</figure>


<h2 id="path">Path</h2>

<p>I played around with several options to make the path look as I would like. I started with the <a href="https://github.com/robbyrussell/oh-my-zsh/tree/master/plugins/shrink-path">shrink-path</a> Zsh plugin, but I didn’t totally like how it looked. I cobbled together a bit of <code>awk</code> to get 2 or 3 characters out of each piece of the path instead, it didn’t look much better but was taking much more space. Ended up with just current dir, this is excellent actually.</p>

<h2 id="branch-name">Branch name</h2>

<p>Paths at work are of the form <code>{kind}/{ticket number}/{description}</code>. I don’t want to know all the pieces. Kind is any of <code>feature</code>, <code>hotfix</code> (very rarely) or occasionally might be something else. It could be shortened to just a few letters. In general, I like seeing the full ticket number (no specific reason). I don’t need to know the full description, it can be shortened to 4 or 5 characters. Awk to the rescue. I love awk. With it I reduced the branch names to what I wanted, additionally I wrote a small checker that makes Spark’s style pull request naming also be shortened. You can check the awk approach <a href="https://github.com/rberenguel/rb-zsh-theme/blob/master/rb.zsh-theme#L60">here</a>.</p>

<h2 id="git-project">Git project</h2>

<p>Knowing the project and current folder is everything I need to know. If I need to know more, I just <code>pwd</code>.</p>

<h2 id="error-under-last-command-root-background-processing">Error under last command, root, background processing</h2>

<p>I don’t like my prompt to change shape. I changed the error reporting to switch colours of the current directory to red. And dropped background processes and root reporting, since I’m never root on my machine, and never run anything in the background unless it needs to be globally.</p>

<h2 id="user-information">User information</h2>

<p>I’m usually pretty sure which user I am, so&hellip; Removed it, I prefer a shorter prompt if possible.</p>

<h2 id="some-helpers">Some helpers</h2>

<p>I added a couple of helpers, reusing some of the code/ideas: jump to Github and jump to JIRA. You can see them in the <a href="https://github.com/rberenguel/rb-zsh-theme">repository</a>.</p><hr/><ul class="pa0">
  
   <li class="list" style="display:inline;">
     <a href="/tags/mac" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif"> Mac</a>
   </li>
  
</ul>
<div class="mt6">
            
            
        </div>
    </section>
<aside class="w-30-l mt6-l">




</aside>

  </article>
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-5407208-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    </main>
    <footer class="bg-gray bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://mostlymaths.net/" >
    &copy; 2019 mostlymaths.net
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
