<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>mostlymaths.net  | Using Gephi with Google Analytics to visualize keywords and landing pages</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.57.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    
      <link rel="stylesheet" href="/css/all.css">
    
      <link rel="stylesheet" href="/byrne-caps/stylesheet.css">
    
      <link rel="stylesheet" href="/css/custom.css">
    
      <link rel="stylesheet" href="/webfonts/monoid.css">
    

    
      
    

    

    <meta property="og:title" content="Using Gephi with Google Analytics to visualize keywords and landing pages" />
<meta property="og:description" content="As of late, I&rsquo;ve been playing a lot with data analysis and visualization tools. Recently I&rsquo;ve read two interesting books (Statistical Analysis with R and Visualize This: The FlowingData Guide to Design, Visualization, and Statistics and I&rsquo;m on my way to another two to refresh my statistics knowledge.
But this post is only mildly related to these books, since it started way before: the day I read about Gephi. Gephi is an open source graph visualization tool, to work with huge (or at least big) datasets and graphs." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mostlymaths.net/2011/08/using-gephi-to-visualize-keywords-and.html/" />
<meta property="article:published_time" content="2011-08-18T18:50:00+02:00" />
<meta property="article:modified_time" content="2011-08-18T18:50:00+02:00" />
<meta itemprop="name" content="Using Gephi with Google Analytics to visualize keywords and landing pages">
<meta itemprop="description" content="As of late, I&rsquo;ve been playing a lot with data analysis and visualization tools. Recently I&rsquo;ve read two interesting books (Statistical Analysis with R and Visualize This: The FlowingData Guide to Design, Visualization, and Statistics and I&rsquo;m on my way to another two to refresh my statistics knowledge.
But this post is only mildly related to these books, since it started way before: the day I read about Gephi. Gephi is an open source graph visualization tool, to work with huge (or at least big) datasets and graphs.">


<meta itemprop="datePublished" content="2011-08-18T18:50:00&#43;02:00" />
<meta itemprop="dateModified" content="2011-08-18T18:50:00&#43;02:00" />
<meta itemprop="wordCount" content="1087">



<meta itemprop="keywords" content="Blog,Data,Visualization," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Using Gephi with Google Analytics to visualize keywords and landing pages"/>
<meta name="twitter:description" content="As of late, I&rsquo;ve been playing a lot with data analysis and visualization tools. Recently I&rsquo;ve read two interesting books (Statistical Analysis with R and Visualize This: The FlowingData Guide to Design, Visualization, and Statistics and I&rsquo;m on my way to another two to refresh my statistics knowledge.
But this post is only mildly related to these books, since it started way before: the day I read about Gephi. Gephi is an open source graph visualization tool, to work with huge (or at least big) datasets and graphs."/>

  </head>

  <body class="ma0 helvetica bg-near-white">

    





<header class="cover bg-top" style="max-height: 250px;background-image: url('https://mostlymaths.net/Keywords-LandingPages.png');">
    <div class="pb1-m pb1-l bg-black-60">
      <nav class="pv1 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://mostlymaths.net/" class="f3 fw2 hover-white no-underline white-90 dib">
      mostlymaths.net
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
              <a class="hover-white no-underline white-90" href="/search/" title="   page">
                  <i class='fas fa-search'> </i>
            </a>
          </li>
          
        </ul>
      
      











    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        
          
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      

  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <h1 class="fw1 mb1 f1">Using Gephi with Google Analytics to visualize keywords and landing pages</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2011-08-18T18:50:00&#43;02:00">August 18, 2011</time>
      
      
      &nbsp;&nbsp;&nbsp;
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> 6 minutes read</span>
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> | 1087 words</span>
      
    </header>
    
    <div id="amzn-assoc-ad-e4bbbdef-c478-4f46-a609-dbb04c453c0d">
    </div>
    <script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=e4bbbdef-c478-4f46-a609-dbb04c453c0d"></script>
    <section class="w-100">
                    <span class="fw1 mv4 i" style="font-size: 0.4rem;">Some links are affiliate links</span>
    </section>
    
    

    <section class="nested-copy-line-height lh-copy f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l justify dropcap">

<p>As of late, I&rsquo;ve been playing a lot with data analysis and visualization tools.
Recently I&rsquo;ve read two interesting books (<a href="http://www.amazon.com/gp/product/1849512086/ref=as_li_ss_tl?ie=UTF8&amp;tag=rbersblog-20&amp;linkCode=as2&amp;camp=217145&amp;creative=399373&amp;creativeASIN=1849512086">Statistical Analysis with
R</a>
and <a href="http://www.amazon.com/gp/product/0470944889/ref=as_li_ss_tl?ie=UTF8&amp;tag=rbersblog-20&amp;linkCode=as2&amp;camp=217145&amp;creative=399369&amp;creativeASIN=0470944889">Visualize This: The FlowingData Guide to Design, Visualization, and
Statistics</a>
and I&rsquo;m on my way to another two to refresh my statistics knowledge.</p>

<p>But this post is only mildly related to these books, since it started way
before: the day I read about <a href="http://gephi.org/">Gephi</a>. Gephi is an open source
graph visualization tool, to work with huge (or at least big) datasets and
graphs. I&rsquo;ve seen it used to graph the friendship network from Facebook, or to
graph tweet-retweets from Twitter (these two can be found in the Learn section
from the Gephi website). In this post I&rsquo;ll guide you step by step to do a
keyword-landing page directed graph, using data from your Google Analytics
account.</p>

<p>A directed graph is a graph with arrows. You have a set of sources (in this case
keywords) and targets (in this case landing pages), and aggregate sources by
name. Plot this, and you have a keyword-landing page graph like this one (data
for the last month in mostlymaths.net restricted to the first 500 keywords).</p>

<figure class="fig-wide">
    <img src="Keywords-LandingPages.png"
         alt="Keywords (arrow) Landing pages"/> <figcaption>
            <p>Keywords (arrow) Landing pages</p>
        </figcaption>
</figure>


<h2 id="what-interesting-things-you-can-read-from-such-a-graph">What interesting things you can read from such a graph</h2>

<ul>
<li>Clustering: In this particular instance, I can find the &ldquo;clusters&rdquo; of my
blog. You can see 3 big aggregations of keywords and landing pages
(left-middle,up-center and right-middle). Each one of these marks pages and
groups of pages with several landing keywords. The groupings mark like the
&ldquo;big themes&rdquo; in my blog, at least from search engine traffic (these are
memory techniques, 9 best programming books I&rsquo;ve read and seed germination
respectively). Oddly enough, I&rsquo;ve had one visit landing in seed germination
from the keyword &ldquo;gnus mail&rdquo;, thus the big seed germination cluster includes
emacs.</li>

<li><p>Big keywords: In gephi you can scale nodes depending on other table
variables. For example, I can scale the landing page dots depending on the
number of keywords, or the number of visits. In particular, I can show which
keywords lead to more of my pages, by using the outDegree (number of arrows
escaping) of a node.</p></li>

<li><p>Big pages: Alternatively, I can scale nodes with the inDegree (number of
arrows entering) to learn which pages have the most different keywords. I can
also label the arrows with the number of visits (and scale them with this
metric).</p></li>

<li><p>Huge pages: with a little more work, I could scale with total visits to see
which are my biggest pages together with the landing keywords.</p></li>
</ul>

<h2 id="step-by-step-guide">Step by step guide</h2>

<p>I&rsquo;ll assume that you can manage to download and install gephi on your own, and
have some knowledge of Google Analytics. Of course, the first you need is to
select the keyword and landing page fields in your Google Analytics page:</p>

<figure class="fig-wide">
    <img src="GA-KeywordsLandingPages.png"/> 
</figure>


<p>Then select Show Rows and select 500:</p>

<figure class="fig-not-so-wide">
    <img src="GA-Rows.png"/> 
</figure>


<p>And get a nice CSV file with the export tab on top:</p>

<figure class="fig-wide">
    <img src="GA-Export.png"/> 
</figure>


<p>Now I don&rsquo;t know if this is because I select CSV and not CSV for Excel, but you
have to clean the file: there are a lot of table identifiers to remove before
the real data table. You also need to remove a line at the end of the file. You
can do all this editing with any plain text editor. I used
<a href="http://www.mostlymaths.net/search/label/emacs">emacs</a>.</p>

<figure class="fig-wide">
    <img src="GA-Clean.png"/> 
</figure>


<p>Remove all this, below Table you should have the useful data,</p>

<figure class="fig-wide">
    <img src="GA-Clean2.png"/> 
</figure>


<p>Remove the last line with dashes. Now the file is almost ready to be imported…
You need to rename the Visits column to something else, for some odd reason
Google Analytics copies the same column twice and Gephi needs unique column
names. Ready to import. In Gephi, go to the Data Table window from the Window
menu, and click Import Spreadsheet:</p>

<figure class="fig-wide">
    <img src="Gephi-ImportSpreadhsheet.png"/> 
</figure>


<p>And now you should select edges table and comma-separated:</p>

<p><figure class="fig-wide">
    <img src="Gephi-Import.png"/> 
</figure>
 <figure class="fig-wide">
    <img src="Gephi-SourcesError.png"/> 
</figure>
</p>

<p>Oops. More tweaking of the CSV file is needed: Change the first two columns to
Source and Target (and don&rsquo;t forget to mark comma as I did, too) and re-import
the file:</p>

<figure class="fig-wide">
    <img src="GA-ImportOK.png"/> 
</figure>


<p>After clicking next, Gephi will ask you for the types of the columns. Since I&rsquo;m
only interested in visits, pages/visit and average time on site, these are the
only columns I want to be floats. You need them to be float to scale the nodes
according to these parameters:</p>

<figure class="fig-not-so-wide">
    <img src="Gephi-ImportParameters.png"/> 
</figure>


<p>Next, we&rsquo;ll see a blob of points with no labels. Choose the Force Atlas
algorithm in the Layout window, run for a while and then click stop:</p>

<p><figure class="fig-wide">
    <img src="Gephi-Blob.png"/> 
</figure>
 <figure class="fig-wide">
    <img src="Gephi-ForceAtlas.png"/> 
</figure>
</p>

<p>The result from the Force Atlas algorithm to distribute points will look nicer,
spreading aggregates of arrows all over the place. Now we need to get the
labels. To do so, you have to click on a somewhat hidden button in the
bottom-right part of the Graph window, and select the correct names for the
tags. In this picture I&rsquo;ve also marked the label and edge scaling according to
parameters:</p>

<figure class="fig-wide">
    <img src="Gephi-Labels.png"/> 
</figure>


<p>Once you have labels, you need to play with the layout to make them more
visible. Run the algorithm Adjust Labels for a while, then Force Atlas and
repeat until you are happy with the results:</p>

<figure class="fig-wide">
    <img src="Gephi-LabelAdjust.png"/> 
</figure>


<p>You can also set labels for the edges, if you are interested in seeing visits,
for example. But I found it messy and unchecked the option. Finally, to scale
the nodes, use the Ranking window:</p>

<figure class="fig-wide">
    <img src="Gephi-Ranking.png"/> 
</figure>


<p>The arrows mark the different ways to adjust: you can change colour, size, text
size or text colour. Feel free to play with all these settings!</p>

<p>You can get a nice PNG file of you graph by pressing the camera-like icon in the
Graph window (clicking the down-arrow will list the properties), or you can
export a PDF or SVG with some more work from the Preview window. Both result in
nice images, but a SVG or PDF can be tweaked extensively using Illustrator or
Inkscape. But it also needs more work from the Gephi side, so I won&rsquo;t enter the
details in this tutorial. Well, just a little! Be sure to check &ldquo;show&rdquo; before
exporting, or you&rsquo;ll see a blank page:</p>

<figure class="fig-wide">
    <img src="Gephi-ExportSVG.png"/> 
</figure>


<p>And with just these steps you can create quite nice (and useful) graphs like
this one:</p>

<figure class="fig-wide">
    <img src="Gephi-FullMap.png"/> 
</figure>


<p>And here you can find a closer zoom:</p>

<figure class="fig-wide">
    <img src="Gephi-ZoomIn.png"/> 
</figure>


<p>I hope you enjoyed this tutorial, if you did it would be awesome if you share
it. I&rsquo;ll try to do a few more Gephi tutorials as I find more interesting (for
me) uses of Gephi. I have also a few post/tutorial ideas about visualizing
Facebook Insights data for pages and using Google Fusion Tables. Stay tuned!</p>
<hr/><ul class="pa0">
  
   <li class="list" style="display:inline;">
     <a href="/tags/blog" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Blog</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/tags/data" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Data</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/tags/visualization" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Visualization</a>
   </li>
  
</ul>
<div class="mt6">
            
            
        </div>
    </section>
<aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links rounded-6">
    <p class="fw1 f4 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/2011/12/good-books-ive-read-in-2011-perfect.html/">Good Books I&#39;ve Read in 2011: Perfect Gifts for Geeks!</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2011/12/working-on-go-with-ipad-bluetooth.html/">Working on the go with an iPad, a Bluetooth keyboard and a 6sync account</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2019/07/2019202122-readings-of-week.html/">2019#20,21,22 Readings of the week</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2019/07/201919-readings-of-week.html/">2019#19 Readings of the week</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2019/07/a-section-of-map-of-data-engineering.html/">A (section) of a map of the data engineering space</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-5407208-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    </main>
    <footer class="bg-gray bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://mostlymaths.net/" >
    &copy; 2019 mostlymaths.net
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
