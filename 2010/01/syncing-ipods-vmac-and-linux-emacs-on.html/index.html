<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>mostlymaths.net  | Syncing iPod&#39;s vMac and Linux: emacs on iPod Touch</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.57.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    
      <link rel="stylesheet" href="/css/all.css">
    
      <link rel="stylesheet" href="/byrne-caps/stylesheet.css">
    
      <link rel="stylesheet" href="/css/custom.css">
    
      <link rel="stylesheet" href="/webfonts/monoid.css">
    

    
      
    

    

    <meta property="og:title" content="Syncing iPod&#39;s vMac and Linux: emacs on iPod Touch" />
<meta property="og:description" content="Using emacs on the go in your iPod Touch / iPhone Maybe you remember a previous post on installing vMac, a Mac Plus emulator for the iPod Touch. I did it just for the geek factor&hellip; and for being able to edit things with Emacs. I have emacs installed:

But what&rsquo;s the use of emacs, without files to edit? It didn&rsquo;t bother me&hellip; at first. Keep on reading for how to keep in sync files edited inside the vMac emacs and files in your Linux box, along with the &ldquo;why should I use emacs in my iPod/iPhone?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mostlymaths.net/2010/01/syncing-ipods-vmac-and-linux-emacs-on.html/" />
<meta property="article:published_time" content="2010-01-02T00:01:00+01:00" />
<meta property="article:modified_time" content="2010-01-02T00:01:00+01:00" />
<meta itemprop="name" content="Syncing iPod&#39;s vMac and Linux: emacs on iPod Touch">
<meta itemprop="description" content="Using emacs on the go in your iPod Touch / iPhone Maybe you remember a previous post on installing vMac, a Mac Plus emulator for the iPod Touch. I did it just for the geek factor&hellip; and for being able to edit things with Emacs. I have emacs installed:

But what&rsquo;s the use of emacs, without files to edit? It didn&rsquo;t bother me&hellip; at first. Keep on reading for how to keep in sync files edited inside the vMac emacs and files in your Linux box, along with the &ldquo;why should I use emacs in my iPod/iPhone?">


<meta itemprop="datePublished" content="2010-01-02T00:01:00&#43;01:00" />
<meta itemprop="dateModified" content="2010-01-02T00:01:00&#43;01:00" />
<meta itemprop="wordCount" content="1089">



<meta itemprop="keywords" content="Programming,emacs,Linux,iPod," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Syncing iPod&#39;s vMac and Linux: emacs on iPod Touch"/>
<meta name="twitter:description" content="Using emacs on the go in your iPod Touch / iPhone Maybe you remember a previous post on installing vMac, a Mac Plus emulator for the iPod Touch. I did it just for the geek factor&hellip; and for being able to edit things with Emacs. I have emacs installed:

But what&rsquo;s the use of emacs, without files to edit? It didn&rsquo;t bother me&hellip; at first. Keep on reading for how to keep in sync files edited inside the vMac emacs and files in your Linux box, along with the &ldquo;why should I use emacs in my iPod/iPhone?"/>

  </head>

  <body class="ma0 helvetica bg-near-white">

    



  <header>
    <div class="bg-gray">
      <nav class="pv1 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://mostlymaths.net/" class="f3 fw2 hover-white no-underline white-90 dib">
      mostlymaths.net
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
              <a class="hover-white no-underline white-90" href="/search/" title="   page">
                  <i class='fas fa-search'> </i>
            </a>
          </li>
          
        </ul>
      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      

  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <h1 class="fw1 mb1 f1">Syncing iPod&#39;s vMac and Linux: emacs on iPod Touch</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2010-01-02T00:01:00&#43;01:00">January 2, 2010</time>
      
      
      &nbsp;&nbsp;&nbsp;
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> 6 minutes read</span>
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> | 1089 words</span>
      
    </header>
    
    

    <section class="nested-copy-line-height lh-copy f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l justify ">

<h2 id="using-emacs-on-the-go-in-your-ipod-touch-iphone">Using emacs on the go in your iPod Touch / iPhone</h2>

<p>Maybe you remember a <a href="http://berenguel.blogspot.com/2009/11/retro-on-ipod-touch-1-mini-vmac.html" target="_blank">previous post</a> on installing vMac, a Mac Plus emulator for the iPod Touch. I did it just for the geek factor&hellip; and for being able to edit things with Emacs. I have emacs installed:</p>

<p><a href="http://3.bp.blogspot.com/_f3d3llNlZKQ/SwRX5-uNUcI/AAAAAAAABcI/CwacRBVXYlM/s1600/IMG_0067.jpg" target="_blank"><img src="http://3.bp.blogspot.com/_f3d3llNlZKQ/SwRX5-uNUcI/AAAAAAAABcI/CwacRBVXYlM/s400/IMG_0067.jpg" alt="Emacs and iPod Touch/iPhone" title="Emacs and iPod Touch/iPhone" /></a></p>

<p>But what&rsquo;s the use of emacs, without files to edit? It didn&rsquo;t bother me&hellip; at first. Keep on reading for how to keep in sync files edited inside the vMac emacs and files in your Linux box, along with the &ldquo;why should I use emacs in my iPod/iPhone?&rdquo;. Or why should I have a Mac Plus on my iPod? Keep reading for my points, afterwards you can read <a href="http://hubpages.com/hub/_86_Mac_Plus_Vs_07_AMD_DualCore_You_Wont_Believe_Who_Wins" target="_blank">86 Mac Plus Vs. 07 AMD DualCore. You Won&rsquo;t Believe Who Wins</a>.</p>

<p>At first I had problems with the keybindings&hellip; promptly solved with this nice settings window in the Special menu&hellip; Be sure to read it carefully. I was always understanding it reversed.</p>

<p><a href="http://2.bp.blogspot.com/_f3d3llNlZKQ/SzUXy9QXwSI/AAAAAAAABpA/vtSo15Xd96U/s1600-h/IMG_0155.JPG" target="_blank"><img src="http://2.bp.blogspot.com/_f3d3llNlZKQ/SzUXy9QXwSI/AAAAAAAABpA/vtSo15Xd96U/s400/IMG_0155.JPG" alt="Emacs and iPod Touch/iPhone" title="Emacs and iPod Touch/iPhone" /></a><br />
Click to enlarge</p>

<p>Ok, now I could edit things with emacs on the go. Why should I bother? But as stress pills up, my LaTeX-ing needs grow. Maybe I need to rewrite something? I have a bunch of paper stacks, waiting to be LaTeXed. And writing LaTeX&hellip; is somewhat of a <a href="http://www.acronymfinder.com/PITA.html" target="_blank">PITA</a>&hellip; unless you have a editor you enjoy using :) The customization level that can be achieved with emacs is unrivaled&hellip; even in this tiny thing. Beware! The configuration of keybindings should follow <a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Init-Rebinding.html#Init-Rebinding" target="_blank">this</a>, but don&rsquo;t use the kbd macro, it is not implemented.</p>

<p>What are the strong points of editing with emacs on the go?</p>

<p>1. Abbrev mode and dabbrev-expand: With these options, writing is extremely quick, at least on a current-time computer. abbrev-mode automatically expands your own abbreviations. As an example, when I write conn and press space (to keep on writing), emacs changes conn to connected, automatically. To learn how to add an abbreviation to the system, read <a href="http://www.emacswiki.org/emacs/AbbrevMode#toc1" target="_blank">this</a>. dabbrev-expand, is bound to some key, in my main machines I have it bound to S-Tab, below you can see a screenshot of how to configure it to Esc-Tab. You only have to write a part of a word. For example, in this post, I could write opt, press S-Tab&hellip; and it would get expanded into options&hellip; and if I pressed further, it would cycle through all possible completions. Nice, isn&rsquo;t it?</p>

<p><a href="http://1.bp.blogspot.com/_f3d3llNlZKQ/SzUXzFx9gRI/AAAAAAAABpI/iroVNUKxS_s/s1600-h/IMG_0157.JPG" target="_blank"><img src="http://1.bp.blogspot.com/_f3d3llNlZKQ/SzUXzFx9gRI/AAAAAAAABpI/iroVNUKxS_s/s400/IMG_0157.JPG" alt="Emacs and iPod Touch/iPhone" title="Emacs and iPod Touch/iPhone" /></a><br />
Click to enlarge</p>

<p>2. Paragraph filling: M-q refills the paragraph. I use this such frequently, that I have to stop from doing this in non-emacs windows. A must, for text writing.</p>

<p>3. Keyboard macros: Curly braces, parentheses, \[\]&hellip; all these are painful to add to a writing, in such a small keyboard. The solution? Adding keyboard macros to keyboard shortcuts. You start recording a macro with C-x ( and stops with C-x ). As an example macro I use, start recording write {} and move the cursor inside the curly braces with the keyboard arrow. Stop recording with C-x ), you are done. Now M-x name-last-kbd-macro (remember, tab completes command names), name it as Curly. Now open your .emacs, go to the keybindings section, and M-x insert-kbd-macro will write the code needed for the function to be useful! Now you just need to add a global key-binding to it. I mapped it to C-m (which previously added a newline&hellip; I don&rsquo;t think I&rsquo;ll use it). Below you can see an image of the .emacs file editing for this. To know what a command does, press C-h k followed by the key combination. With this you can decide if it was a really useful command or you can dump it for the one you really need. As before, you can find more information on keyboard macros in the <a href="http://www.emacswiki.org/emacs/KeyboardMacros" target="_blank">emacsWiki</a>.</p>

<p><a href="http://1.bp.blogspot.com/_f3d3llNlZKQ/SzUXzV-seNI/AAAAAAAABpQ/mmTrUWG_now/s1600-h/IMG_0158.JPG" target="_blank"><img src="http://1.bp.blogspot.com/_f3d3llNlZKQ/SzUXzV-seNI/AAAAAAAABpQ/mmTrUWG_now/s400/IMG_0158.JPG" alt="Emacs and iPod Touch/iPhone" title="Emacs and iPod Touch/iPhone" /></a><br />
Click to enlarge</p>

<p>Well, it has also problems&hellip; mostly iPod, not emacs related. But I won&rsquo;t list them here, you can already think them out.</p>

<p>Ok, now we have a problem to be solved. How to keep files in sync in&amp;out of vMac&rsquo;s filesystem? Luckily, Linux can mount the hfs filesystem used by dsk image files, your iPod has wifi and ssh and I learnt enough bash to write a couple of scripts. I could squeeze it into just one, but these two work and now I don&rsquo;t bother. If anyone wants to merge them, let me know after you are done. Both scripts expect your iPod/iPhone IP from the command line. Usually something like 192.168.1.???. I.e. you should run it as ./FromIpod.sh 192.168.1.34. To use it, you need root credentials to mount loop filesystems (at least I had to), and the mobile account password.If you dont have a suitable dsk file to start working, the best is use the FromIpod.sh script first, after creating a dsk image file from inside vMac. You can do so sliding two fingers from right to left to get the &ldquo;Disks&rdquo; menu, and taping add. After it is added, mount it, open and your Mac Plus will complain it is not formatted, format it. Unmount it and run the script.</p>

<blockquote>
<pre><code>#!/bin/sh# Copyright 2009 Ruben Berenguel  
\# (GPL omitted here)  
#  
\# FromIpod: Will copy FILENAME from  
\# your iPod's MacOsClassic directory  
\# into DSKDESTINATIONDIRECTORY, mount  
\# it and copy all files into  
\# DATADESTINATIONDIRECTORY, setting all  
\# possible permissions (I had problems  
\# with permissions before). You can  
\# download the latest version (and read  
\# the GPL license) version from  
\# [http://rberenguel.googlecode.com/svn/trunk/Bash/FromIpod.sh](http://rberenguel.googlecode.com/svn/trunk/Bash/FromIpod.sh)
</code></pre>

<p>FILENAME=TeXFiles.dsk<br />
DSKDESTINATIONDIRECTORY=~/Documents/<br />
MOUNTPOINT=/mnt/hfs-disk/<br />
DATADESTINATIONDIRECTORY=~/Documents/iPod-Data<br />
scp mobile@$1:/var/mobile/Library/MacOSClassic/$FILENAME $DSKDESTINATIONDIRECTORY<br />
sudo mount -oloop -t hfs $DSKDESTINATIONDIRECTORY$FILENAME $MOUNTPOINT<br />
sudo cp $MOUNTPOINT*.* $DATADESTINATIONDIRECTORY<br />
sudo chmod u+rxw $DATADESTINATIONDIRECTORY/*.* -v<br />
sudo umount $MOUNTPOINT</p>
</blockquote>

<p>The second script, as the first, needs you to be root and expects to be run with an IP.</p>

<blockquote>
<p>#!/bin/sh# Copyright 2009 Ruben Berenguel<br />
# (GPL omitted here)</p>

<p># ToIpod: will mount DSKSOURCE/FILENAME in<br />
# MOUNTPOINT, and copy all files in<br />
# DATASOURCEDIRECTORY to the mounted<br />
# filesystem. It will set all permissions.<br />
# Then will unmount and use scp to copy<br />
# FILENAME to your iPod/iPhone. You can<br />
# download the latest version (and read<br />
# the GPL license) from<br />
# <a href="http://rberenguel.googlecode.com/svn/trunk/Bash/ToIpod.sh" target="_blank">http://rberenguel.googlecode.com/svn/trunk/Bash/ToIpod.sh</a></p>

<p>FILENAME=TeXFiles.dsk<br />
DSKSOURCE=~/Documents/<br />
MOUNTPOINT=/mnt/hfs-disk/<br />
DATASOURCEDIRECTORY=~/Documents/iPod-Data</p>

<p>sudo mount -oloop -t hfs $DSKSOURCE$FILENAME $MOUNTPOINT<br />
sudo cp $DATASOURCEDIRECTORY/*.* $MOUNTPOINT<br />
sudo chmod a+rxw $MOUNTPOINT*.*<br />
sudo umount $MOUNTPOINT<br />
scp $DSKSOURCE$FILENAME mobile@$1:/var/mobile/Library/MacOSClassic/$FILENAME</p>
</blockquote>

<p>Keep in mind that the DATADESTINATION/SOURCE directory should not be your real working directory, but a kind of swap directory, where you know you can mess things up!</p>

<p>If you found this useful, consider sharing it on Reddit, Twitter, Digg, Stumble or whatever you enjoy using. Thanks!</p>

<p>You may also be interested inParseList(ScrambleList(Relateds(Linux,iPod,Mac,emacs)))</p>
<hr/><ul class="pa0">
  
   <li class="list" style="display:inline;">
     <a href="/tags/programming" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Programming</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/tags/emacs" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">emacs</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/tags/linux" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Linux</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/tags/ipod" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">iPod</a>
   </li>
  
</ul>
<div class="mt6">
            
            
        </div>
    </section>
<aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links rounded-6">
    <p class="fw1 f4 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/2009/11/mg-zile-quick-emacs-in-command-line.html/">mg &amp; Zile: quick emacs in the command line</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2010/02/debugging-with-emacsvalgrind.html/">Debugging with emacs&#43;valgrind</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2010/01/part-of-ipad.html/">Part of iPad</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2018/01/2017-year-in-review.html/">2017: Year in Review</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2011/12/working-on-go-with-ipad-bluetooth.html/">Working on the go with an iPad, a Bluetooth keyboard and a 6sync account</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-5407208-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    </main>
    <footer class="bg-gray bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://mostlymaths.net/" >
    &copy; 2019 mostlymaths.net
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
