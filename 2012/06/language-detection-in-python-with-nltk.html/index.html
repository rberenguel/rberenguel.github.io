<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>mostlymaths.net  | Language Detection in Python with NLTK Stopwords</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.57.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/rberenguel.github.io/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    
      <link rel="stylesheet" href="/rberenguel.github.iobyrne-caps/stylesheet.css">
    
      <link rel="stylesheet" href="/rberenguel.github.iocss/custom.css">
    

    
      
    

    

    <meta property="og:title" content="Language Detection in Python with NLTK Stopwords" />
<meta property="og:description" content="Lately I&rsquo;ve been coding a little more Python than usual, some twitter API stuff, some data crunching code. The other day I was thinking how I could detect the language a twitter user was writing in. Of course, I&rsquo;m sure there is a library out there that does it&hellip; But the NLTK library (the Natural Language Toolkit for Python) does not have any function for this, or at least I was not able to find it after 5 minutes of Google search." />
<meta property="og:type" content="article" />
<meta property="og:url" content="rberenguel.github.io/2012/06/language-detection-in-python-with-nltk.html/" />
<meta property="article:published_time" content="2012-06-07T14:55:00+02:00" />
<meta property="article:modified_time" content="2012-06-07T14:55:00+02:00" />
<meta itemprop="name" content="Language Detection in Python with NLTK Stopwords">
<meta itemprop="description" content="Lately I&rsquo;ve been coding a little more Python than usual, some twitter API stuff, some data crunching code. The other day I was thinking how I could detect the language a twitter user was writing in. Of course, I&rsquo;m sure there is a library out there that does it&hellip; But the NLTK library (the Natural Language Toolkit for Python) does not have any function for this, or at least I was not able to find it after 5 minutes of Google search.">


<meta itemprop="datePublished" content="2012-06-07T14:55:00&#43;02:00" />
<meta itemprop="dateModified" content="2012-06-07T14:55:00&#43;02:00" />
<meta itemprop="wordCount" content="741">



<meta itemprop="keywords" content="Programming,Thoughts,Python,NLP,How-to,Django," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Language Detection in Python with NLTK Stopwords"/>
<meta name="twitter:description" content="Lately I&rsquo;ve been coding a little more Python than usual, some twitter API stuff, some data crunching code. The other day I was thinking how I could detect the language a twitter user was writing in. Of course, I&rsquo;m sure there is a library out there that does it&hellip; But the NLTK library (the Natural Language Toolkit for Python) does not have any function for this, or at least I was not able to find it after 5 minutes of Google search."/>

  </head>

  <body class="ma0 helvetica bg-near-white">

    



  <header>
    <div class="bg-gray">
      <nav class="pv1 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="rberenguel.github.io" class="f3 fw2 hover-white no-underline white-90 dib">
      mostlymaths.net
    </a>
    <div class="flex-l items-center">
      

      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      

  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <h1 class="fw1 mb1 f1">Language Detection in Python with NLTK Stopwords</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2012-06-07T14:55:00&#43;02:00">June 7, 2012</time>
      
      
      &nbsp;&nbsp;&nbsp;
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> 4 minutes read</span>
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> | 741 words</span>
      
    </header>
    
    <section class="nested-copy-line-height lh-copy f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l justify "><p><a href="http://whatlanguageis.com/"><img src="http://4.bp.blogspot.com/-vE4xLdT6gyI/T9Cjk0l4iGI/AAAAAAAADe0/OJA96X9STW4/s320/Screen+shot+2012-06-07+at+2.49.45+PM.png" alt="whatlanguageis.com" title="What Language Is" /></a></p>

<p>Lately I&rsquo;ve been coding a little more Python than usual, some twitter API stuff, some data crunching code.  The other day I was thinking how I could detect the language a twitter user was writing in. Of course, I&rsquo;m sure there is a library out there that does it&hellip; But the NLTK library (the Natural Language Toolkit for Python) does not have any function for this, or at least I was not able to find it after 5 minutes of Google search. So&hellip;</p>

<p>I had a simple enough idea to determine it, though. NLTK comes equipped with several stopword lists. A stopword is a very common word in a language, adding no significative information (&ldquo;the&rdquo; in English is the prime example. My idea: pick the text, find most common words and compare with stopwords. The language with the most stopwords &ldquo;wins&rdquo;.</p>

<p>Implementing it was just a matter of a few minutes and around 45 lines.</p>

<pre><code>from nltk.corpus import stopwords  
  
def scoreFunction(wholetext):  
    &quot;&quot;&quot;Get text, find most common words and compare with known  
    stopwords. Return dictionary of values&quot;&quot;&quot;  
    \# C makes me program like this: create always empty stuff just in case  
    dictiolist={}  
    scorelist={}  
    \# These are the available languages with stopwords from NLTK  
    NLTKlanguages=\[&quot;dutch&quot;,&quot;finnish&quot;,&quot;german&quot;,&quot;italian&quot;,
``````
&quot;portuguese&quot;,&quot;spanish&quot;,&quot;turkish&quot;,&quot;danish&quot;,&quot;english&quot;,
``````
&quot;french&quot;,&quot;hungarian&quot;,&quot;norwegian&quot;,&quot;russian&quot;,&quot;swedish&quot;\]  
    \# Just in case I add stopword lists
``````
FREElanguages=\[&quot;&quot;\]  
    languages=NLTKlanguages+FREElanguages  
    \# Fill the dictionary of languages, to avoid  unnecessary function calls  
    for lang in NLTKlanguages:  
        dictiolist\[lang\]=stopwords.words(lang)  
    \# Split all the text in tokens and convert to lowercase. In a  
    \# decent version of this, I'd also clean the unicode  
    tokens=nltk.tokenize.word\_tokenize(wholetext)  
    tokens=\[t.lower() for t in tokens\]  
    \# Determine the frequency distribution of words, looking for the  
    \# most common words  
    freq\_dist=nltk.FreqDist(tokens)  
    \# This is the only interesting piece, and not by much. Pick a  
    \# language, and check if each of the 20 most common words is in  
    \# the language stopwords. If it's there, add 1 to this language  
    \# for each word matched. So the maximal score is 20. Why 20? No  
    \# specific reason, looks like a good number of words.  
    for lang in languages:  
        scorelist\[lang\]=0  
        for word in freq\_dist.keys()\[0:20\]:  
            if word in dictiolist\[lang\]:  
                scorelist\[lang\]+=1  
    return scorelist  
  
def whichLanguage(scorelist):  
    &quot;&quot;&quot;This function just returns the language name, from a given  
    &quot;scorelist&quot; dictionary as defined above.&quot;&quot;&quot;  
    maximum=0  
    for item in scorelist:  
        value=scorelist\[item\]  
        if maximum&lt;value:  
            maximum=value  
            lang=item  
    return lang  

</code></pre>

<p>Well, does it work? Quite! I tested it with some Wikipedia text:</p>

<blockquote>
<p><strong>scoreFunction</strong>(&ldquo;e Operationen in der Karibik, ohne dass es dabei zu größeren See­schlachten gekommen wäre. In Europa war die erfolglose Belagerung des britischen Stütz­punktes Gibraltar die einzige nennens­werte Auseinander­setzung. Der englisch-­spanische Konflikt endete formell am 9. November 1729 mit dem Abschluss des Vertrages von Sevilla und der Wieder­herstellung des Status quo ante. Die grundsätzlichen Differenzen beider Staaten wurden jedoch nicht beseitigt, was kaum zehn Jahre später zum Ausbruch eines weiteren Krieges führte&rdquo;)<br />
{&lsquo;swedish&rsquo;: 0, &lsquo;portuguese&rsquo;: 0, &lsquo;english&rsquo;: 2, &lsquo;hungarian&rsquo;: 0, &lsquo;finnish&rsquo;: 0, &lsquo;turkish&rsquo;: 0, <strong>&lsquo;german&rsquo;: 5</strong>, &lsquo;dutch&rsquo;: 3, &lsquo;french&rsquo;: 1, &lsquo;norwegian&rsquo;: 1, &lsquo;catalan&rsquo;: 0, &lsquo;spanish&rsquo;: 0, &lsquo;russian&rsquo;: 0, &lsquo;danish&rsquo;: 1, &lsquo;italian&rsquo;: 1}<br />
<strong>scoreFunction</strong>(&ldquo;Man vet forholdsvis lite om Merkur; bakkebaserte teleskop viser kun en opplyst halvmåne med begrensede detaljer. Mye av informasjonen om planeten ble samlet av Mariner 10 (1974–76) som kartla rundt 45 % av overflaten.&rdquo;)<br />
{&lsquo;swedish&rsquo;: 3, &lsquo;portuguese&rsquo;: 0, &lsquo;english&rsquo;: 0, &lsquo;hungarian&rsquo;: 0, &lsquo;finnish&rsquo;: 1, &lsquo;turkish&rsquo;: 1, &lsquo;german&rsquo;: 0, &lsquo;dutch&rsquo;: 2, &lsquo;french&rsquo;: 1, <strong>&lsquo;norwegian&rsquo;: 4</strong>, &lsquo;catalan&rsquo;: 1, &lsquo;spanish&rsquo;: 1, &lsquo;russian&rsquo;: 0, &lsquo;danish&rsquo;: 2, &lsquo;italian&rsquo;: 0}<br />
<strong>scoreFunction</strong>(&ldquo;A transit of Venus across the Sun takes place when the planet Venus passes directly between the Sun and Earth, becoming visible against the solar disk. During a transit, Venus can be seen from Earth as a small black disk moving slowly across the face of the Sun&rdquo;)<br />
{&lsquo;swedish&rsquo;: 0, &lsquo;portuguese&rsquo;: 2, <strong>&lsquo;english&rsquo;: 9</strong>, &lsquo;hungarian&rsquo;: 2, &lsquo;finnish&rsquo;: 0, &lsquo;turkish&rsquo;: 0, &lsquo;german&rsquo;: 0, &lsquo;dutch&rsquo;: 1, &lsquo;french&rsquo;: 1, &lsquo;norwegian&rsquo;: 0, &lsquo;catalan&rsquo;: 1, &lsquo;spanish&rsquo;: 1, &lsquo;russian&rsquo;: 0, &lsquo;danish&rsquo;: 0, &lsquo;italian&rsquo;: 1}</p>
</blockquote>

<p>But it breaks with non-ascii text (like accents, umlauts and other funny letters,) so it is quite un-useful in these cases. But oh well, for 10 minutes of coding it&rsquo;s not that bad, a quick hack.</p>

<p>Since last week I had started to read the <a href="http://djangobook.com/">django book</a>, I thought this would make for an interesting first project to post online, and you can find it at <a href="http://whatlanguageis.com/">whatlanguageis.com</a>, with some unicode improvements. It&rsquo;s still in very early beta, working with just a handful of languages and without any kind of text-length checker. Just a proof of concept about my django &ldquo;skills.&rdquo;</p>
<hr/><ul class="pa0">
  
   <li class="list" style="display:inline;">
     <a href="/rberenguel.github.io/tags/programming" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Programming</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/rberenguel.github.io/tags/thoughts" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Thoughts</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/rberenguel.github.io/tags/python" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Python</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/rberenguel.github.io/tags/nlp" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">NLP</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/rberenguel.github.io/tags/how-to" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">How-to</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/rberenguel.github.io/tags/django" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Django</a>
   </li>
  
</ul>
<div class="mt6">
            
            
        </div>
    </section>
<aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links rounded-6">
    <p class="fw1 f4 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="rberenguel.github.io/2011/12/working-on-go-with-ipad-bluetooth.html/">Working on the go with an iPad, a Bluetooth keyboard and a 6sync account</a>
        </li>
	    
	     <li  class="mb2">
          <a href="rberenguel.github.io/2010/08/which-programming-language-should-i.html/">Which programming language should I learn next?</a>
        </li>
	    
	     <li  class="mb2">
          <a href="rberenguel.github.io/2010/06/on-productivity-down.html/">On a productivity down</a>
        </li>
	    
	     <li  class="mb2">
          <a href="rberenguel.github.io/2010/05/installed-go-in-mac-os-105.html/">Installed Go in Mac OS 10.5</a>
        </li>
	    
	     <li  class="mb2">
          <a href="rberenguel.github.io/2010/04/8-reader-reasons-for-re-inventing-wheel.html/">8 reader reasons for re-inventing the wheel as a programmer</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-gray bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="rberenguel.github.io" >
    &copy; 2019 mostlymaths.net
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/rberenguel.github.io/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
