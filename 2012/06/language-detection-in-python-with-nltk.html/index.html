<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>mostlymaths.net  | Language Detection in Python with NLTK Stopwords</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.57.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    
      <link rel="stylesheet" href="/css/all.css">
    
      <link rel="stylesheet" href="/byrne-caps/stylesheet.css">
    
      <link rel="stylesheet" href="/css/custom.css">
    
      <link rel="stylesheet" href="/webfonts/monoid.css">
    

    
      
    

    

    <meta property="og:title" content="Language Detection in Python with NLTK Stopwords" />
<meta property="og:description" content="Lately I&rsquo;ve been coding a little more Python than usual, some twitter API stuff, some data crunching code. The other day I was thinking how I could detect the language a twitter user was writing in. Of course, I&rsquo;m sure there is a library out there that does itâ€¦ But the NLTK library (the Natural Language Toolkit for Python) does not have any function for this, or at least I was not able to find it after 5 minutes of Google search." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mostlymaths.net/2012/06/language-detection-in-python-with-nltk.html/" />
<meta property="article:published_time" content="2012-06-07T14:55:00+02:00" />
<meta property="article:modified_time" content="2012-06-07T14:55:00+02:00" />
<meta itemprop="name" content="Language Detection in Python with NLTK Stopwords">
<meta itemprop="description" content="Lately I&rsquo;ve been coding a little more Python than usual, some twitter API stuff, some data crunching code. The other day I was thinking how I could detect the language a twitter user was writing in. Of course, I&rsquo;m sure there is a library out there that does itâ€¦ But the NLTK library (the Natural Language Toolkit for Python) does not have any function for this, or at least I was not able to find it after 5 minutes of Google search.">


<meta itemprop="datePublished" content="2012-06-07T14:55:00&#43;02:00" />
<meta itemprop="dateModified" content="2012-06-07T14:55:00&#43;02:00" />
<meta itemprop="wordCount" content="762">



<meta itemprop="keywords" content="Programming,Thoughts,Python,NLP,Django," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Language Detection in Python with NLTK Stopwords"/>
<meta name="twitter:description" content="Lately I&rsquo;ve been coding a little more Python than usual, some twitter API stuff, some data crunching code. The other day I was thinking how I could detect the language a twitter user was writing in. Of course, I&rsquo;m sure there is a library out there that does itâ€¦ But the NLTK library (the Natural Language Toolkit for Python) does not have any function for this, or at least I was not able to find it after 5 minutes of Google search."/>

  </head>

  <body class="ma0 helvetica bg-near-white">

    





<header class="cover bg-top" style="max-height: 250px;background-image: url('https://mostlymaths.net/whatlanguageis.png');">
    <div class="pb1-m pb1-l bg-black-60">
      <nav class="pv1 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://mostlymaths.net/" class="f3 fw2 hover-white no-underline white-90 dib">
      mostlymaths.net
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
              <a class="hover-white no-underline white-90" href="/search/" title="   page">
                  <i class='fas fa-search'> </i>
            </a>
          </li>
          
        </ul>
      
      











    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        
          
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      

  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <h1 class="fw1 mb1 f1">Language Detection in Python with NLTK Stopwords</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2012-06-07T14:55:00&#43;02:00">June 7, 2012</time>
      
      
      &nbsp;&nbsp;&nbsp;
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> 4 minutes read</span>
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> | 762 words</span>
      
    </header>
    
    <div id="amzn-assoc-ad-e4bbbdef-c478-4f46-a609-dbb04c453c0d">
    </div>
    <script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=e4bbbdef-c478-4f46-a609-dbb04c453c0d"></script>
    <section class="w-100">
                    <span class="fw1 mv4 i" style="font-size: 0.4rem;">Some links are affiliate links</span>
    </section>
    
    
    <section class="w-60 mb1">
        <span class="fw2 ">Please note that this project was deactivated around 2015</span>
    </section>
    

    <section class="nested-copy-line-height lh-copy f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l justify dropcap"><p>Lately I&rsquo;ve been coding a little more Python than usual, some twitter API stuff,
some data crunching code. The other day I was thinking how I could detect the
language a twitter user was writing in. Of course, I&rsquo;m sure there is a library
out there that does itâ€¦ But the NLTK library (the Natural Language Toolkit for
Python) does not have any function for this, or at least I was not able to find
it after 5 minutes of Google search. Soâ€¦</p>

<figure class="fig-not-so-wide"><a href="whatlanguageis.com">
    <img src="whatlanguageis.png"
         alt="2019: Note that this link no longer works"/> </a><figcaption>
            <p>2019: Note that this link no longer works</p>
        </figcaption>
</figure>


<p>I had a simple enough idea to determine it, though. NLTK comes equipped with
several stopword lists. A stopword is a frequent word in a language, adding
no significative information (&ldquo;the&rdquo; in English is the prime example. My idea:
pick the text, find most common words and compare with stopwords. The language
with the most stopwords &ldquo;wins&rdquo;.</p>

<p>Implementing it was just a matter of a few minutes and around 45 lines.</p>

<p><span class="scaps">Note from the future:</span> 2019 Ruben is ashamed of this code, as expected ðŸ˜„</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> nltk.corpus <span style="color:#f92672">import</span> stopwords

<span style="color:#75715e"># These are the available languages with stopwords from NLTK</span>
NLTKlanguages<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;dutch&#34;</span>,<span style="color:#e6db74">&#34;finnish&#34;</span>,<span style="color:#e6db74">&#34;german&#34;</span>,<span style="color:#e6db74">&#34;italian&#34;</span>,
               <span style="color:#e6db74">&#34;portuguese&#34;</span>,<span style="color:#e6db74">&#34;spanish&#34;</span>,<span style="color:#e6db74">&#34;turkish&#34;</span>,<span style="color:#e6db74">&#34;danish&#34;</span>,<span style="color:#e6db74">&#34;english&#34;</span>,
               <span style="color:#e6db74">&#34;french&#34;</span>,<span style="color:#e6db74">&#34;hungarian&#34;</span>,<span style="color:#e6db74">&#34;norwegian&#34;</span>,<span style="color:#e6db74">&#34;russian&#34;</span>,<span style="color:#e6db74">&#34;swedish&#34;</span>]
<span style="color:#75715e"># Just in case I add optional stopword lists</span>

FREElanguages<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;&#34;</span>]
languages<span style="color:#f92672">=</span>NLTKlanguages<span style="color:#f92672">+</span>FREElanguages
<span style="color:#75715e"># Fill the dictionary of languages, to avoid unnecessary function calls</span>
<span style="color:#66d9ef">for</span> lang <span style="color:#f92672">in</span> NLTKlanguages:
  dictiolist[lang]<span style="color:#f92672">=</span>stopwords<span style="color:#f92672">.</span>words(lang)


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">scoreFunction</span>(wholetext):
  <span style="color:#e6db74">&#34;&#34;&#34;Get text, find most common words and compare with known
</span><span style="color:#e6db74">  stopwords. Return dictionary of values&#34;&#34;&#34;</span>
  <span style="color:#75715e"># C makes me program like this: create always empty stuff just in case</span>
  dictiolist<span style="color:#f92672">=</span>{}
  scorelist<span style="color:#f92672">=</span>{}
  <span style="color:#75715e"># Split all the text in tokens and convert to lowercase. In a</span>
  <span style="color:#75715e"># decent version of this, I&#39;d also clean the unicode</span>
  tokens<span style="color:#f92672">=</span>nltk<span style="color:#f92672">.</span>tokenize<span style="color:#f92672">.</span>word_tokenize(wholetext)
  tokens<span style="color:#f92672">=</span>[t<span style="color:#f92672">.</span>lower() <span style="color:#66d9ef">for</span> t <span style="color:#f92672">in</span> tokens]
  <span style="color:#75715e"># Determine the frequency distribution of words, looking for the</span>
  <span style="color:#75715e"># most common words</span>
  freq_dist<span style="color:#f92672">=</span>nltk<span style="color:#f92672">.</span>FreqDist(tokens)
  <span style="color:#75715e"># This is the only interesting piece, and not by much. Pick a</span>
  <span style="color:#75715e"># language, and check if each of the 20 most common words is in</span>
  <span style="color:#75715e"># the language stopwords. If it&#39;s there, add 1 to this language</span>
  <span style="color:#75715e"># for each word matched. So the maximal score is 20. Why 20? No</span>
  <span style="color:#75715e"># specific reason, looks like a good number of words.</span>
  <span style="color:#66d9ef">for</span> lang <span style="color:#f92672">in</span> languages:
    scorelist[lang]<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">for</span> word <span style="color:#f92672">in</span> freq_dist<span style="color:#f92672">.</span>keys()[<span style="color:#ae81ff">0</span>:<span style="color:#ae81ff">20</span>]:
      <span style="color:#66d9ef">if</span> word <span style="color:#f92672">in</span> dictiolist[lang]:
        scorelist[lang]<span style="color:#f92672">+=</span><span style="color:#ae81ff">1</span>
  <span style="color:#66d9ef">return</span> scorelist

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">whichLanguage</span>(scorelist):
  <span style="color:#e6db74">&#34;&#34;&#34;This function just returns the language name, from a given
</span><span style="color:#e6db74">  &#34;scorelist&#34; dictionary as defined above.&#34;&#34;&#34;</span>
  maximum<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
  <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> scorelist:
    value<span style="color:#f92672">=</span>scorelist[item]
    <span style="color:#66d9ef">if</span> maximum<span style="color:#f92672">&lt;</span>value:
      maximum<span style="color:#f92672">=</span>value
      lang<span style="color:#f92672">=</span>item
  <span style="color:#66d9ef">return</span> lang</code></pre></div>
<p>Well, does it work? Quite! I tested it with some Wikipedia text:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">scoreFunction(<span style="color:#e6db74">&#34;e Operationen in der Karibik, ohne dass es dabei zu grÃ¶ÃŸeren SeeÂ­schlachten gekommen wÃ¤re. In Europa war die erfolglose Belagerung des britischen StÃ¼tzÂ­punktes Gibraltar die einzige nennensÂ­werte AuseinanderÂ­setzung. Der englisch-Â­spanische Konflikt endete formell am 9. November 1729 mit dem Abschluss des Vertrages von Sevilla und der WiederÂ­herstellung des Status quo ante. Die grundsÃ¤tzlichen Differenzen beider Staaten wurden jedoch nicht beseitigt, was kaum zehn Jahre spÃ¤ter zum Ausbruch eines weiteren Krieges fÃ¼hrte&#34;</span>) 
<span style="color:#f92672">&gt;</span> {<span style="color:#e6db74">&#39;swedish&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;portuguese&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;english&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;hungarian&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;finnish&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;turkish&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#f92672">**</span><span style="color:#e6db74">&#39;german&#39;</span>: <span style="color:#ae81ff">5</span><span style="color:#f92672">**</span>, <span style="color:#e6db74">&#39;dutch&#39;</span>: <span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;french&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;norwegian&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;catalan&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;spanish&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;russian&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;danish&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;italian&#39;</span>: <span style="color:#ae81ff">1</span>} 
scoreFunction(<span style="color:#e6db74">&#34;Man vet forholdsvis lite om Merkur; bakkebaserte teleskop viser kun en opplyst halvmÃ¥ne med begrensede detaljer. Mye av informasjonen om planeten ble samlet av Mariner 10 (1974â€“76) som kartla rundt 45 % av overflaten.&#34;</span>) 
<span style="color:#f92672">&gt;</span> {<span style="color:#e6db74">&#39;swedish&#39;</span>: <span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;portuguese&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;english&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;hungarian&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;finnish&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;turkish&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;german&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;dutch&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;french&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#f92672">**</span><span style="color:#e6db74">&#39;norwegian&#39;</span>: <span style="color:#ae81ff">4</span><span style="color:#f92672">**</span>, <span style="color:#e6db74">&#39;catalan&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;spanish&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;russian&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;danish&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;italian&#39;</span>: <span style="color:#ae81ff">0</span>} 
scoreFunction(<span style="color:#e6db74">&#34;A transit of Venus across the Sun takes place when the planet Venus passes directly between the Sun and Earth, becoming visible against the solar disk. During a transit, Venus can be seen from Earth as a small black disk moving slowly across the face of the Sun&#34;</span>) 
<span style="color:#f92672">&gt;</span> {<span style="color:#e6db74">&#39;swedish&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;portuguese&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#f92672">**</span><span style="color:#e6db74">&#39;english&#39;</span>: <span style="color:#ae81ff">9</span><span style="color:#f92672">**</span>, <span style="color:#e6db74">&#39;hungarian&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;finnish&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;turkish&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;german&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;dutch&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;french&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;norwegian&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;catalan&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;spanish&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;russian&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;danish&#39;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;italian&#39;</span>: <span style="color:#ae81ff">1</span>}</code></pre></div>
<p>But it breaks with non-ascii text (like accents, umlauts and other funny
letters,) so it is quite un-useful in these cases. But oh well, for 10 minutes
of coding it&rsquo;s not that bad, a quick hack.</p>

<p>Since last week I had started to read the <a href="http://djangobook.com/">django book</a>,
I thought this would make for an interesting first project to post online, and
you can find it at <a href="http://whatlanguageis.com/">whatlanguageis.com</a>, with some
unicode improvements. It&rsquo;s still in early beta, working with just a handful
of languages and without any kind of text-length checker. Just a proof of
concept about my django &ldquo;skills.&rdquo;</p>
<hr/><ul class="pa0">
  
   <li class="list" style="display:inline;">
     <a href="/tags/programming" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Programming</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/tags/thoughts" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Thoughts</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/tags/python" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Python</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/tags/nlp" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">NLP</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/tags/django" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Django</a>
   </li>
  
</ul>
<div class="mt6">
            
            
        </div>
    </section>
<aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links rounded-6">
    <p class="fw1 f4 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/2011/12/working-on-go-with-ipad-bluetooth.html/">Working on the go with an iPad, a Bluetooth keyboard and a 6sync account</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2010/08/which-programming-language-should-i.html/">Which programming language should I learn next?</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2010/06/on-productivity-down.html/">On a productivity down</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2010/04/8-reader-reasons-for-re-inventing-wheel.html/">8 reader reasons for re-inventing the wheel as a programmer</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2010/03/8-reasons-for-re-inventing-wheel-as.html/">8 reasons for re-inventing the wheel as a programmer</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-5407208-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    </main>
    <footer class="bg-gray bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://mostlymaths.net/" >
    &copy; 2019 mostlymaths.net
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
