<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>mostlymaths.net  | Fading images in Javascript</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.57.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.d98f2eb6bcd1eaedb7edf166bd16af26.css" rel="stylesheet">
    

    
      <link rel="stylesheet" href="/byrne-caps/stylesheet.css">
    
      <link rel="stylesheet" href="/css/custom.css">
    

    
      
    

    

    <meta property="og:title" content="Fading images in Javascript" />
<meta property="og:description" content="CicleImatges()
Source code:
// Copyright 2009 Rubén Berenguel
// ruben /at/ maia /dot/ ub /dot/ es
// This program is free software: you can redistribute it and/or
// modify it under the terms of the GNU General Public License as
// published by the Free Software Foundation, either version 3 of
// the License, or (at your option) any later version.
// This program is distributed in the hope that it will be useful," />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mostlymaths.net/2009/10/fading-images-in-javascript.html/" />
<meta property="article:published_time" content="2009-10-01T01:00:00+02:00" />
<meta property="article:modified_time" content="2009-10-01T01:00:00+02:00" />
<meta itemprop="name" content="Fading images in Javascript">
<meta itemprop="description" content="CicleImatges()
Source code:
// Copyright 2009 Rubén Berenguel
// ruben /at/ maia /dot/ ub /dot/ es
// This program is free software: you can redistribute it and/or
// modify it under the terms of the GNU General Public License as
// published by the Free Software Foundation, either version 3 of
// the License, or (at your option) any later version.
// This program is distributed in the hope that it will be useful,">


<meta itemprop="datePublished" content="2009-10-01T01:00:00&#43;02:00" />
<meta itemprop="dateModified" content="2009-10-01T01:00:00&#43;02:00" />
<meta itemprop="wordCount" content="579">



<meta itemprop="keywords" content="Blog,Programming,How-to," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Fading images in Javascript"/>
<meta name="twitter:description" content="CicleImatges()
Source code:
// Copyright 2009 Rubén Berenguel
// ruben /at/ maia /dot/ ub /dot/ es
// This program is free software: you can redistribute it and/or
// modify it under the terms of the GNU General Public License as
// published by the Free Software Foundation, either version 3 of
// the License, or (at your option) any later version.
// This program is distributed in the hope that it will be useful,"/>

  </head>

  <body class="ma0 helvetica bg-near-white">

    



  <header>
    <div class="bg-gray">
      <nav class="pv1 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://mostlymaths.net/" class="f3 fw2 hover-white no-underline white-90 dib">
      mostlymaths.net
    </a>
    <div class="flex-l items-center">
      

      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      

  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <h1 class="fw1 mb1 f1">Fading images in Javascript</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2009-10-01T01:00:00&#43;02:00">October 1, 2009</time>
      
      
      &nbsp;&nbsp;&nbsp;
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> 3 minutes read</span>
      <span class="fw1 mv4 dib tracked i" style="font-size: 0.4rem;"> | 579 words</span>
      
    </header>
    
    <section class="nested-copy-line-height lh-copy f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l justify "><p>CicleImatges()</p>

<p>Source code:</p>

<p>// Copyright 2009 Rubén Berenguel</p>

<p>// ruben /at/ maia /dot/ ub /dot/ es</p>

<p>// This program is free software: you can redistribute it and/or<br />
// modify it under the terms of the GNU General Public License as<br />
// published by the Free Software Foundation, either version 3 of<br />
// the License, or (at your option) any later version.</p>

<p>// This program is distributed in the hope that it will be useful,<br />
// but WITHOUT ANY WARRANTY; without even the implied warranty of<br />
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the<br />
// GNU General Public License for more details.</p>

<p>// You should have received a copy of the GNU General Public<br />
// License along with this program. If not, see<br />
// &lt;<a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.</p>

<p>// Variable initialization: NumImatges is the number of images to be<br />
// shown</p>

<p>var IndexActual\=0<br />
var ImatgeActual\=0<br />
var NumImatges\=3<br />
var IndexAnterior\=0</p>

<p>// Set of image files to be used.</p>

<p>var ImatgesAtzar\=new Array()</p>

<p>ImatgesAtzar[0]=&ldquo;<a href="http://lh3.ggpht.com/_f3d3llNlZKQ/RlISOebv9mI/AAAAAAAAADc/coFYsCFe4wU/s512/test1.jpg&quot;">http://lh3.ggpht.com/_f3d3llNlZKQ/RlISOebv9mI/AAAAAAAAADc/coFYsCFe4wU/s512/test1.jpg&quot;</a><br />
ImatgesAtzar[1]=&ldquo;<a href="http://lh5.ggpht.com/_f3d3llNlZKQ/RlXwuObv9qI/AAAAAAAAAD8/PKALGDJPH50/s512/test4-sph-pl-mc-r-10min.jpg&quot;">http://lh5.ggpht.com/_f3d3llNlZKQ/RlXwuObv9qI/AAAAAAAAAD8/PKALGDJPH50/s512/test4-sph-pl-mc-r-10min.jpg&quot;</a><br />
ImatgesAtzar[2]=&ldquo;<a href="http://lh4.ggpht.com/_f3d3llNlZKQ/RltJlebv9rI/AAAAAAAAAEE/08_sLlO40f4/9%20%2810%20min%29.jpg&quot;">http://lh4.ggpht.com/_f3d3llNlZKQ/RltJlebv9rI/AAAAAAAAAEE/08_sLlO40f4/9%20%2810%20min%29.jpg&quot;</a><br />
ImatgesAtzar[3]=&ldquo;<a href="http://lh6.ggpht.com/_f3d3llNlZKQ/RlWTgebv9pI/AAAAAAAAAD0/cDNJ1ZJn5og/s512/test-sph-mc-r.jpg&quot;">http://lh6.ggpht.com/_f3d3llNlZKQ/RlWTgebv9pI/AAAAAAAAAD0/cDNJ1ZJn5og/s512/test-sph-mc-r.jpg&quot;</a><br />
ImatgesAtzar[3]=&ldquo;<a href="http://lh6.ggpht.com/_f3d3llNlZKQ/R17DJl5dkjI/AAAAAAAAAM0/SRI3QHh4zfg/s720/SketchBegetLlapis.jpg&quot;">http://lh6.ggpht.com/_f3d3llNlZKQ/R17DJl5dkjI/AAAAAAAAAM0/SRI3QHh4zfg/s720/SketchBegetLlapis.jpg&quot;</a><br />
ImatgesAtzar[4]=&ldquo;<a href="http://lh4.ggpht.com/_f3d3llNlZKQ/Sap0KWEYdwI/AAAAAAAAAwg/c5zGUKxY2Yg/s512/BigRabbitScaled.jpg&quot;">http://lh4.ggpht.com/_f3d3llNlZKQ/Sap0KWEYdwI/AAAAAAAAAwg/c5zGUKxY2Yg/s512/BigRabbitScaled.jpg&quot;</a><br />
ImatgesAtzar[5]=&ldquo;<a href="http://lh6.ggpht.com/_f3d3llNlZKQ/SobwVfFCmLI/AAAAAAAABSI/piL0IbmRNGg/s512/BWLavaurs13.jpg&quot;">http://lh6.ggpht.com/_f3d3llNlZKQ/SobwVfFCmLI/AAAAAAAABSI/piL0IbmRNGg/s512/BWLavaurs13.jpg&quot;</a><br />
ImatgesAtzar[6]=&ldquo;<a href="http://lh3.ggpht.com/_f3d3llNlZKQ/Smgc3HO6ydI/AAAAAAAABNM/e5n1j-9xuAY/s640/Butterfly.jpg&quot;">http://lh3.ggpht.com/_f3d3llNlZKQ/Smgc3HO6ydI/AAAAAAAABNM/e5n1j-9xuAY/s640/Butterfly.jpg&quot;</a><br />
ImatgesAtzar[7]=&ldquo;<a href="http://lh3.ggpht.com/_f3d3llNlZKQ/Sjk0uHW5X9I/AAAAAAAAA-g/vKnK_Wl7_as/s512/spheres.jpg&quot;">http://lh3.ggpht.com/_f3d3llNlZKQ/Sjk0uHW5X9I/AAAAAAAAA-g/vKnK_Wl7_as/s512/spheres.jpg&quot;</a></p>

<p>// Set of identifiers for the html code</p>

<p>var IdImatges\=new Array()</p>

<p>IdImatges[0]=&ldquo;idImatge0&rdquo;;<br />
IdImatges[1]=&ldquo;idImatge1&rdquo;;<br />
IdImatges[2]=&ldquo;idImatge2&rdquo;;<br />
// IdImatges[3]=&ldquo;idImatge3&rdquo;;<br />
// IdImatges[4]=&ldquo;idImatge4&rdquo;;<br />
// IdImatges[5]=&ldquo;idImatge5&rdquo;;</p>

<p>// Preloading all images in a new array</p>

<p>PreCarrega=new Array()</p>

<p>var MatriuNumImatges\= new Array()</p>

<p>for (n=0;n&lt;ImatgesAtzar.length;n++)<br />
{<br />
PreCarrega[n]=new Image()<br />
PreCarrega[n].src=ImatgesAtzar[n]<br />
}</p>

<p>// This resets the &ldquo;renew&rdquo; image counters</p>

<p>for(n=0;n&lt;NumImatges;n++){MatriuNumImatges[n]=-3;}</p>

<p>// And this prefills the image list, without repeating images</p>

<p>for(n=0;n<NumImatges;n++){  
do{  
Potser=Math.floor(Math.random()\*(ImatgesAtzar.length));  
Potser=(Potser>=ImatgesAtzar.length)?Potser-1:Potser;<br />
}while(Discrimina(Potser,-3, MatriuNumImatges));<br />
MatriuNumImatges[n]=Potser;<br />
}</p>

<p>function Discrimina(Actual, Anterior, Matriu)<br />
{<br />
// This function checks whether a new random image is suitable for<br />
// a next step: It is if it is not already in the matrix.</p>

<p>if(Actual==Anterior){ return true;}<br />
for(i=0;i&lt;Matriu.length;i++){<br />
if(Actual==Matriu[i])<br />
{return true;}<br />
}<br />
return false;<br />
}</p>

<p>function SetOpacitat(objId, opacitat)<br />
{<br />
// This function sets the opacity of the image element, hopefully<br />
// in several browsers</p>

<p>obj=document.getElementById(objId)<br />
if(obj==null){return;}<br />
opacitat = (opacitat == 100)?99.999:opacitat;</p>

<p>obj.style.filter = &ldquo;alpha(opacity:&ldquo;+opacitat+&rdquo;)&ldquo;;</p>

<p>obj.style.KHTMLOpacity = opacitat/100;</p>

<p>obj.style.MozOpacity = opacitat/100;</p>

<p>obj.style.opacity = opacitat/100;<br />
}</p>

<p>function fadeIn(obj,opacitat)<br />
{<br />
// Fade in an image. The speed can be modified later, but not as a<br />
// parameter. Change &ldquo;7&rdquo; to suit your tastes (it is the percentage<br />
// step)</p>

<p>SetOpacitat(obj, opacitat);<br />
if (opacitat &lt; 100) {<br />
opacitat += 2<br />
window.setTimeout(&ldquo;fadeIn(&lsquo;&rdquo;+obj+&ldquo;&rsquo;,&rdquo;+opacitat+&ldquo;)&rdquo;, 7);<br />
}<br />
}</p>

<p>function fadeOut(obj,opacitat)<br />
{<br />
// Fade out an image. The speed can be modified later, but not as<br />
// a parameter. Change &ldquo;7&rdquo; to suit your tastes (it is the<br />
// percentage step)</p>

<p>if (opacitat &gt; 0) {<br />
SetOpacitat(obj, opacitat);<br />
opacitat -= 2;<br />
window.setTimeout(&ldquo;fadeOut(&lsquo;&rdquo;+obj+&ldquo;&rsquo;,&rdquo;+opacitat+&ldquo;)&rdquo;, 7);<br />
}<br />
}</p>

<p>function initImatge(imatgeId)<br />
{<br />
// Fade in an image on load.</p>

<p>SetOpacitat(imatgeId, 0);<br />
fadeIn(imatgeId,0);<br />
}</p>

<p>// This part of the code writes the starting image set html</p>

<p>// document.write(&rsquo;<div id="MarcImatgesFeina">&rsquo;)<br />
for(i=0;i&lt;MatriuNumImatges.length;i++){<br />
document.write(&rsquo;&lt;img style=&ldquo;padding: 0 0 0 0; border-width: 2 px; border-style: solid; border-color: #D0D0D0; cursor: crosshair; width: 35%; &ldquo;&lsquo;)</p>

<p>document.write(&lsquo;src=&ldquo;&rsquo;+ImatgesAtzar[MatriuNumImatges[i]]+&lsquo;&rdquo; id=&ldquo;idImatge&rsquo;+i+&lsquo;&rdquo; alt=&ldquo;idImatge&rsquo;+i+&lsquo;&rdquo;&gt;&rsquo;)<br />
}<br />
//document.write(&rsquo;<br> <a style="text-align: center;" href="LlistaImatges.html">Totes les imatges</a>&rsquo;)<br />
//document.write(&rdquo;</div>&rdquo;)</p>

<p>// And the following function will cycle them</p>

<p>function CicleImatges()<br />
{<br />
do{<br />
IndexActual=Math.floor(Math.random()*(MatriuNumImatges.length))<br />
IndexActual=(IndexActual&gt;=MatriuNumImatges.length)?IndexActual-1:IndexActual;<br />
}while(IndexActual==IndexAnterior);<br />
IndexAnterior=IndexActual;<br />
ImatgeAnterior=MatriuNumImatges[IndexActual];<br />
do{<br />
ImatgeActual=Math.floor(Math.random()*(ImatgesAtzar.length))<br />
ImatgeActual=(ImatgeActual&gt;=ImatgesAtzar.length)?ImatgeActual-1:ImatgeActual;<br />
}while(Discrimina(ImatgeActual,ImatgeAnterior, MatriuNumImatges));<br />
MatriuNumImatges[IndexActual]=ImatgeActual;<br />
// ActualIndex now contains the index of the image to be changed,<br />
// which won&rsquo;t be the same that changed &ldquo;before&rdquo;. ImatgeActual<br />
// contains the index of the new, and different, image.<br />
window.setTimeout(&ldquo;Aux1(&lsquo;&rdquo;+IdImatges[IndexActual]+&ldquo;&lsquo;,&rdquo;+ImatgeActual+&ldquo;)&rdquo;,1300)</p>

<p>}</p>

<p>// Now comes a tricky part with counters&hellip; The easiest way was to<br />
// link one to another to keep the process going. Change the last<br />
// parameter to set the timings</p>

<p>function Aux1(Id, Actual)<br />
{<br />
fadeOut(Id,100)<br />
window.setTimeout(&ldquo;Aux2(&lsquo;&rdquo;+Id+&ldquo;&rsquo;,&rdquo;+Actual+&ldquo;)&rdquo;,1500)<br />
}</p>

<p>function Aux2(Id, Actual)<br />
{<br />
elem=document.getElementById(Id);<br />
if(elem==null){Aux3(Id);}<br />
elem.src=ImatgesAtzar[Actual];<br />
Aux3(Id)<br />
}<br />
function Aux3(Id)<br />
{<br />
initImatge(Id)<br />
window.setTimeout(&ldquo;AuxiliarCicleImatges()&rdquo;,1500);<br />
}</p>

<p>function AuxiliarCicleImatges()<br />
{<br />
window.setTimeout(&ldquo;CicleImatges()&rdquo;,1500)<br />
}</p>

<p>CicleImatges()</p>

<p>Related posts:ParseList(ScrambleList(Relateds(Programming)),15)</p>
<hr/><ul class="pa0">
  
   <li class="list" style="display:inline;">
     <a href="/tags/blog" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Blog</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/tags/programming" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Programming</a>
   </li>
  
   <li class="list" style="display:inline;">
     <a href="/tags/how-to" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">How-to</a>
   </li>
  
</ul>
<div class="mt6">
            
            
        </div>
    </section>
<aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links rounded-6">
    <p class="fw1 f4 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/2009/09/whistle-control-your-computer.html/">Whistle control your computer (Linux&amp;Mac)</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/09/my-backup-script-in-maclinux.html/">My backup script in Mac/Linux</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/09/quick-latex-ing-with-emacs.html/">Quick latex-ing with emacs: dabbrev and skeletons</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/09/slicing-scannings.html/">Slicing scannings</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/2009/09/calendars-emacs.html/">Calendars &amp; emacs</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-gray bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://mostlymaths.net/" >
    &copy; 2019 mostlymaths.net
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
